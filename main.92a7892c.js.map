{"version":3,"sources":["ts/canvas.ts","ts/main.ts"],"names":[],"mappings":"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","file":"main.92a7892c.js","sourceRoot":"../src","sourcesContent":["type CanvasColour = string | CanvasGradient | CanvasPattern;\ntype RGB = [number, number, number];\ntype pixelOperation = [number, number];\n\ninterface ICanvasStyle {\n  fillStyle: CanvasColour;\n  font: string;\n  lineWidth: number;\n  strokeStyle: CanvasColour;\n}\n\nexport default class Canvas {\n  private ctx: CanvasRenderingContext2D;\n  private style: ICanvasStyle;\n  private pixelOperations: pixelOperation[] = [];\n\n  constructor(width = window.innerWidth, height = window.innerHeight) {\n    this.createCanvas(width, height);\n  }\n\n  get width() {\n    return this.ctx.canvas.width;\n  }\n\n  get height() {\n    return this.ctx.canvas.height;\n  }\n\n  get fillColour() {\n    const hex = this.ctx.fillStyle;\n    if (typeof hex === 'string') {\n      const r = parseInt(hex.substring(1, 3), 16);\n      const g = parseInt(hex.substring(3, 5), 16);\n      const b = parseInt(hex.substring(5), 16);\n      return [r, g, b];\n    }\n    throw new Error(\n      'CanvasGradient or CanvasPattern colour types are not supported.'\n    );\n  }\n\n  set fillColour(rgb: RGB) {\n    this.ctx.fillStyle = `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n  }\n\n  get strokeColour() {\n    const strokeColour = this.ctx.strokeStyle;\n    return [strokeColour[4], strokeColour[7], strokeColour[10]];\n  }\n\n  set strokeColour(rgb: RGB) {\n    this.ctx.strokeStyle = `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n  }\n\n  public start(draw: () => void) {\n    draw();\n    this.updatePixels();\n    requestAnimationFrame(() => {\n      this.start(draw);\n    });\n  }\n\n  public set(x: number, y: number) {\n    const rgb = this.fillColour;\n    const index = y * this.width * 4 + x * 4;\n    this.pixelOperations.push([index, rgb[0]]);\n    this.pixelOperations.push([index + 1, rgb[1]]);\n    this.pixelOperations.push([index + 2, rgb[2]]);\n  }\n\n  public background(colour: RGB) {\n    this.push();\n    this.fillColour = colour;\n    this.rect(0, 0, this.width, this.height);\n    this.pop();\n  }\n\n  public point(x: number, y: number, r: number) {\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, r, 0, 2 * Math.PI);\n    this.ctx.fill();\n  }\n\n  public line(x1: number, y1: number, x2: number, y2: number) {\n    this.ctx.beginPath();\n    this.ctx.moveTo(x1, y1);\n    this.ctx.lineTo(x2, y2);\n    this.ctx.stroke();\n  }\n\n  public rect(x: number, y: number, w: number, h: number) {\n    this.ctx.beginPath();\n    this.ctx.rect(x, y, w, h);\n    this.ctx.fill();\n  }\n\n  public circle(x: number, y: number, r: number) {\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, r, 0, 2 * Math.PI);\n    this.ctx.fill();\n  }\n\n  private push() {\n    this.style = {\n      fillStyle: this.ctx.fillStyle,\n      font: this.ctx.font,\n      lineWidth: this.ctx.lineWidth,\n      strokeStyle: this.ctx.strokeStyle,\n    };\n  }\n\n  private pop() {\n    this.ctx.fillStyle = this.style.fillStyle;\n    this.ctx.font = this.style.font;\n    this.ctx.lineWidth = this.style.lineWidth;\n    this.ctx.strokeStyle = this.style.strokeStyle;\n  }\n\n  private updatePixels() {\n    const image = this.ctx.getImageData(0, 0, this.width, this.height);\n    const pixels = image.data;\n    for (const operation of this.pixelOperations) {\n      const index = operation[0];\n      const value = operation[1];\n      pixels[index] = value;\n    }\n    this.ctx.putImageData(image, 0, 0);\n  }\n\n  private createCanvas(width: number, height: number) {\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    this.ctx = canvas.getContext('2d');\n    document.body.appendChild(canvas);\n  }\n}\n","import Canvas from './canvas';\n\nconst canvas = new Canvas();\n\nfunction draw() {\n  canvas.background([255, 255, 255]);\n}\n\ncanvas.start(draw);\n"]}