{"version":3,"sources":["ts/canvas.ts","ts/main.ts"],"names":[],"mappings":"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","file":"main.5d1cbac3.js","sourceRoot":"../src","sourcesContent":["type CanvasColour = string | CanvasGradient | CanvasPattern;\ntype RGB = [number, number, number];\ntype pixelOperation = [number, number];\n\ninterface ICanvasStyle {\n  fillStyle: CanvasColour;\n  font: string;\n  lineWidth: number;\n  strokeStyle: CanvasColour;\n}\n\nexport default class Canvas {\n  private ctx: CanvasRenderingContext2D;\n  private style: ICanvasStyle;\n  private pixelOperations: pixelOperation[] = [];\n  private loop = true;\n  private framerate = 0;\n\n  constructor(width = window.innerWidth, height = window.innerHeight) {\n    this.createCanvas(width, height);\n  }\n\n  get width() {\n    return this.ctx.canvas.width;\n  }\n\n  get height() {\n    return this.ctx.canvas.height;\n  }\n\n  get fps() {\n    return this.framerate;\n  }\n\n  get fillColour() {\n    const hex = this.ctx.fillStyle;\n    if (typeof hex === 'string') {\n      const r = parseInt(hex.substring(1, 3), 16);\n      const g = parseInt(hex.substring(3, 5), 16);\n      const b = parseInt(hex.substring(5), 16);\n      return [r, g, b];\n    }\n    throw new Error(\n      'CanvasGradient or CanvasPattern colour types are not supported.'\n    );\n  }\n\n  set fillColour(rgb: RGB) {\n    this.ctx.fillStyle = `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n  }\n\n  get strokeColour() {\n    const strokeColour = this.ctx.strokeStyle;\n    return [strokeColour[4], strokeColour[7], strokeColour[10]];\n  }\n\n  set strokeColour(rgb: RGB) {\n    this.ctx.strokeStyle = `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n  }\n\n  public start(draw: () => void) {\n    if (this.loop) {\n      const start = performance.now();\n      draw();\n      this.updatePixels();\n      const end = performance.now();\n      this.framerate = 1 / ((end - start) / 1000);\n      requestAnimationFrame(() => {\n        this.start(draw);\n      });\n    }\n  }\n\n  public noLoop() {\n    this.loop = false;\n  }\n\n  public set(x: number, y: number) {\n    const rgb = this.fillColour;\n    const index = y * this.width * 4 + x * 4;\n    this.pixelOperations.push([index, rgb[0]]);\n    this.pixelOperations.push([index + 1, rgb[1]]);\n    this.pixelOperations.push([index + 2, rgb[2]]);\n  }\n\n  public background(colour: RGB) {\n    this.push();\n    this.fillColour = colour;\n    this.rect(0, 0, this.width, this.height);\n    this.pop();\n  }\n\n  public line(x1: number, y1: number, x2: number, y2: number) {\n    this.ctx.beginPath();\n    this.ctx.moveTo(x1, y1);\n    this.ctx.lineTo(x2, y2);\n    this.ctx.stroke();\n  }\n\n  public rect(x: number, y: number, w: number, h: number) {\n    this.ctx.beginPath();\n    this.ctx.rect(x, y, w, h);\n    this.ctx.fill();\n  }\n\n  public circle(x: number, y: number, r: number) {\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, r, 0, 2 * Math.PI);\n    this.ctx.fill();\n  }\n\n  private push() {\n    this.style = {\n      fillStyle: this.ctx.fillStyle,\n      font: this.ctx.font,\n      lineWidth: this.ctx.lineWidth,\n      strokeStyle: this.ctx.strokeStyle,\n    };\n  }\n\n  private pop() {\n    this.ctx.fillStyle = this.style.fillStyle;\n    this.ctx.font = this.style.font;\n    this.ctx.lineWidth = this.style.lineWidth;\n    this.ctx.strokeStyle = this.style.strokeStyle;\n  }\n\n  private updatePixels() {\n    const image = this.ctx.getImageData(0, 0, this.width, this.height);\n    const pixels = image.data;\n    for (const operation of this.pixelOperations) {\n      const index = operation[0];\n      const value = operation[1];\n      pixels[index] = value;\n    }\n    this.ctx.putImageData(image, 0, 0);\n  }\n\n  private createCanvas(width: number, height: number) {\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    this.ctx = canvas.getContext('2d');\n    document.body.appendChild(canvas);\n  }\n}\n","import Canvas from './canvas';\n\nconst cnv = new Canvas();\n\nfunction draw() {\n  cnv.background([255, 255, 255]);\n  cnv.fillColour = [255, 0, 0];\n  for (let x = 0; x < cnv.width / 4; x++) {\n    for (let y = 0; y < cnv.height / 4; y++) {\n      cnv.set(x, y);\n    }\n  }\n  cnv.strokeColour = [0, 255, 0];\n  cnv.line(400, 400, 800, 100);\n  cnv.fillColour = [0, 0, 255];\n  cnv.rect(500, 500, 100, 100);\n  cnv.fillColour = [0, 0, 0];\n  cnv.circle(700, 700, 50);\n  cnv.noLoop();\n}\n\ncnv.start(draw);\n"]}